## 内容

### chap1、概论

#### 1.1、计算机系统的层次结构

+ **固件（Firmware）**：是一种具有软件功能的硬件。
+ 以软件为主实现的机器称为**虚拟机器**。

#### 1.2、计算机系统结构、计算机组成和计算机实现

+ ##### 1.2.1、计算机系统结构的定义和内涵

  + **计算机系统结构**：研究的是软、硬件之间的功能分配以及对传统机器级界面的确定。

+ ##### 1.2.2、计算机组成与计算机实现的定义和内涵

  + **计算机组成**：（Computer Organization）指的是计算机系统结构的逻辑实现，包括机器级内部的数据流和控制流的组成以及逻辑设计等。
  + **计算机实现：**（Computer Implementation）指的是计算机组成的物理实现，包括处理机、主存等部件的物理结构，器件的集成度和速度，器件、模块、插件、底板的划分与连接，专用器件的设计，微组装技术，信号传输，电源、冷却及整机装配技术等。
    + 计算机实现的设计着眼于器件技术和微组装技术，其中，**器件技术**起着主导作用。

+ ##### 1.2.3、计算机系统结构、组成和实现的相互关系和影响

  + 计算机系统结构设计的任务：是进行软、硬件的功能分配，确定传统机器组的软、硬件界面
  + “计算机系统结构”这门学科来讲，实际上包括了**系统结构和组成**两个方面的内容。

#### 1.3、计算机系统的软、硬件取舍及定量设计原理

+ ##### 1.3.1、软、硬件取舍的基本原则

+ ##### 1.3.2、计算机系统的定量设计原理

  + 1、Huffman压缩原理
  + 2、Amdahl定律：确定对系统中性能瓶颈部件采取措施提高速度后系统性能改进的程度。
    + 系统加速比
    + 性能可改进比
    + 部件加速比
  + 3、程序访问的局部性定律
    + 时间上的局部性：
    + 空间上的局部性：

+ ##### 1.3.3、计算机系统设计的主要任务和方法

  + 计算机系统设计的主要任务：包括**系统结构、组成和实现的设计**。
  + 计算机系统的设计方法
    + “由上往下”设计
    + “由下往上”设计
    + “从中间开始”向两边设计

#### 1.4、软件、应用、器件的发展对系统结构的影响

+ ##### 1.4.1、软件发展对系统结构的影响

  + 实现软件移植的技术主要有如下几种：
    + 1、统一高级语言
    + 2、采用系列机
    + 3、模拟和仿真
      + **模拟（Simulation）**：用机器语言程序解释实现软件移植的方法。进行模拟的A机器称为**宿主机**，被模拟的B机器称为**虚拟机**。
      + **仿真（Emulation）**：用微程序直接解释另一种机器指令系统的方法。进行仿真的A机器称为**宿主机**，被仿真的B机器称为**目标机**。

+ ##### 1.4.2、应用的发展对系统结构的影响

+ ##### 1.4.3、器件的发展对系统结构的影响

  + 计算机所用器件已从电子管、晶体管、小规模集成电路、大规模集成电路迅速发展到超大规模集成电路，并使用或开始使用砷化镓器件、高密度组装技术和光电子集成技术。

#### 1.5、系统结构中的并行性开发及计算机系统的分类

##### 1.5.1、并行性的概念与开发

+ **并行性（Parallelism）**：解题中具有可以同时进行运算或操作的特性。
  + **同时性（Simultaneity）**：指两个或多个事件在同一时刻发生
  + **并发性（Concurrency）**：指两个或多个事件在同一时间间隔内发生
+ 2、并行性开发的途径
  + （1）时间重叠
  + （2）资源重复
  + （3）资源共享
+ 3、计算机系统的并行性发展
+ 4、多机系统的耦合度

##### 1.5.2、计算机系统的分类

+ 1966年，Michael J.Flynn提出按指令流和数据流的多倍性对计算机系统分类。
  + 指令流：机器执行的指令序列。
  + 数据流：由指令流调用的数据序列，包括输入数据和中间结果。
  + 多倍性：指在系统性能瓶颈部件上处于同一执行阶段的指令或数据的最大可能个数
  + SISD
  + SIMD
  + MISD
  + MIMD
+ 1978年，David J.Kuck
  + SISE
  + SIME
  + MISE
  + MIME
+ 1972年，Tse-yun Feng
+ 1977年，Wolfgang Handler

### chap2、数据表示、寻址方式与指令系统

#### 2.1、数据表示

##### 2.1.1、数据表示与数据结构

+ 数据表示：指的是**能由计算机硬件识别和引用**的数据类型，表现在它有对这种类型的数据进行操作的指令和运算部件。

##### 2.1.2、高级数据表示

+ 1、自定义（Self-defining）数据表示：**标志符数据表示**和**数据描述符**
  + 标志符数据表示
    + 类型标志：数据值
  + 数据描述符：**与数据分开存放**，用于描述所要访问的数据是整块还是单个的，访问该数据块或数据元素所要的地址以及其他信息等。
    + 描述符：前3位是“101”
    + 数据：前3位是“000”
+ 2、向量、数组数据表示
  + 有向量数据表示的处理机就是**向量处理机**
  + 在没有向量、数组数据表示的计算机上经编译后需**借助于变址操作实现**。
+ 3、堆栈数据表示

##### 2.1.3、引入数据表示的原则

+ 原则1：看系统的效率是否有显著提高，包括**实现时间**和**存储时间**是否有显著减少
+ 原则2：看引入这种数据表示后，其**通用性**和**利用率**是否提高。

##### 2.1.4、浮点数尾数基值大小和下溢处理方法的选择

+ 1、浮点数尾数基值的选择
  + **阶码**（小数点前面、m个机器位），**尾数**（小数点后面、p+1位）
  + 浮点数表示中p和m的位数主要是根据**数的表示范围和精度**来确定的
+ 2、浮点数尾数下溢处理方法
  + 截断法：超出计算机字长的部分截去
  + 舍入法：在计算机运算的规定字长之外增设一位附加位
  + 恒置“1”法：将计算机运算的规定字长的最低位恒置为“1”（用于中、高速计算机）
  + 查表舍入法

+ 系统结构的研究方法往往是设法**找出影响问题的各个因素**，建立起相关的数学模型。

#### 2.2、寻址方式

+ 寻址方式：指的是指令**按什么方式寻找（或访问）**到所需的操作数或信息的。

##### 2.2.1、寻址方式的三种面向

+ 多数计算机都将主存、寄存器、堆栈分类编址，分别有**面向主存、面向寄存器、面向堆栈**的寻址方式。

##### 2.2.2、寻址方式在指令中的指明

+ 一种方式：占用操作码的某些位来指明
+ 另一种方式：不占用操作码，而是在地址码部分专门设置寻址方式位字段指明

##### 2.2.3、程序在主存中的定位技术

+ 当程序装入主存时，就需要进行逻辑地址空间到物理地址空间的变换，即**进行程序的定位**
+ （1）静态再定位：程序执行时，**物理地址不再改变**
+ （2）动态再定位：把**在执行每条指令时才形成访存物理地址**的方法
  + 变址寻址：对诸如向量、数组等数据块运算的支持，以便于实现程序的循环
  + 基址寻址：对逻辑地址空间到物理地址空间变换的支持，以利于实现程序的动态再定位
+ （3）虚实地址映像表

##### 2.2.4、物理主存中信息的存储分布

+ 按整数边界存储

#### 2.3、指令系统的设计与优化

##### 2.3.1、指令系统设计的基本原则

+ **指令系统**：是程序设计者看计算机的主要属性，是软、硬件的主要界面，它在很大程度上决定了计算机具有的基本功能。
+ 指令系统的设计包括**指令的功能**（操作类型、寻址方式和具体操作内容）和**指令格式**的设计。
+ 非特权型指令
+ 特权型指令

##### 2.3.2、指令操作码的优化

+ 指令是由**操作码**和**地址码**两部分组成的。
+ **哈夫曼压缩的基本思想：**
+ 研究操作码的优化表示：主要是为了**缩短指令字长，减少程序总位数、增加指令字**能表示的操作信息和地址信息。

##### 2.3.3、指令字格式的优化

#### 2.4、指令系统的发展和改进

##### 2.4.1、两种途径和方向（CISC和RISC）

+ 一种，**软件功能的硬化**，复杂指令系统计算机（Complex Instruction Set Computer）
+ 另一种，**降低硬件设计的复杂度**，精简指令系统计算机（Reduced Instruction Set Computer）

##### 2.4.2、按CISC方向发展和改进指令系统

+ 1、面向**目标程序**的优化实现改进
  + 途径1：通过对大量已有机器的机器语言程序及其执行情况，统计各种指令和指令串的使用频度来加以分析和改进
  + 途径2：由微程序解释实现
+ 2、面向**高级语言**的优化实现改进
  + 途径1：通过对源程序中各种高级语言语句的使用频度进行统计来分析改进
  + 途径2：如何面向编译，优化代码生成来改进
  + 途径3：改进指令系统，使它与各种语言间的语义差距都有同等的缩小
  + 途径4：让计算机具有分别面向各种高级语言的多种指令系统、多种系统结构的面向问题动态自寻优的计算机系统
  + 途径5：发展高级语言计算机
+ 3、面向**操作系统**的优化实现改进
  + 途径1：
  + 途径2：
  + 途径3：
  + 途径4：

##### 2.4.3、按RISC方向发展和改进指令系统

+ 1、CISC的问题
+ 2、设计RISC的基本原则
+ 3、设计RISC结构采用的基本技术
+ 4、RISC技术的发展

### chap3、存储、中断、总线与I/O系统

#### 3.1、存储系统的基本要求和并行主存系统

##### 3.1.1、存储系统的基本要求

+ 要求：大容量、高速度、低价格
+ 存储容量：Sm = W（存储体的字长：**单位是位或字节**） * l（存储体的字数） * m（并行工作的存储体数）。
+ 速度：
  + Ta（访问时间）
  + Tm（存储周期）
  + Bm（频宽、带宽）
+ 价格：
  + 总价格C
  + 每位价格：c=C/Sm
+ 弥补CPU与存储器在速度上的差异，一条途径是**在组成上引入并行和重叠技术**

##### 3.1.2、并行主存系统（*lionel，难点*）

+ 单体单字存储器
+ 单体多字存储器
+ **并行主存系统**：能并行读出多个CPU字的单体多字和单体单字、多体多字的交叉访问主存系统
+ 例3-1

#### 3.2、中断系统

+ **中断**：
  + 内部中断：由CPU内的异常引起的
  + 外部中断：由中断信号引起
    + 可屏蔽中断
    + 不可屏蔽中断
  + 软件中断：由自陷指令引起，用于供操作系统服务
+ **中断系统**：响应和处理各种中断的软、硬件总体

##### 3.2.1、中断的分类和分级

+ 中断的分类
  + 访管中断
  + 程序性中断（中断码16位）
  + 外部中断（中断码16位）
  + 输入/输出中断（中断码16位）
  + 重新启动中断
+ 中断的分级
  + 第1级：机器校验
  + 第2级：程序性和管理程序调用
  + 第3级：外部中断级别
  + 第4级：重新启动中断级别

##### 3.2.2、中断的响应次序与处理次序

+ **中断的响应次序**：是在同时发生多个不同中断类的中断请求时，中断响应硬件中的排队器所决定的响应次序。

##### 3.2.3、中断系统的软、硬件功能分配

+ 中断系统功能：包括中断请求的保存与清除、优先级的确定、中断断点及现场的保存、对中断请求的分析和处理以及中断返回等。
+ **中断现场**包括软件状态（）和硬件状态（）。
+ 中断响应时间主要**取决于交换PSW的时间**

#### 3.3、总线系统

+ 0
  + **总线**：是用于互连计算机、CPU、存储器、I/O接口及外围设备、远程通信设备间信息传送通路的集合。
  + 总线与其相配合的附属控制电路统称为**总线系统**。
  + **数据线根数**决定同时传送的数据位数，即**数据通路宽度**。
  + **地址线根数**决定直接寻址的范围；

##### 3.3.1、总线的分类

##### 3.3.2、总线的控制方式

+ 集中式总线控制

##### 3.3.3、总线的通信技术

+ 同步通信
+ 异步通信

##### 3.3.4、数据宽度与总线线数

+ **数据宽度**：是I/O设备取得I/O总线后所传送数据的总量。
  + 有单字（单字节）、定长块、可变长块、单定加定长块和单字加可变长块
+ **总线线数**：
  + 数据总线的宽度有位、字节、字或双字等4种

#### 3.4、I/O系统

##### 3.4.1、I/O系统概述

##### 3.4.2、通道处理机的工作原理和流量设计

+ 1、通道处理机的工作原理
  + 根据通道数据传送期中信息传送方式的不同，可分为**字节多路、数组多路和选择**3类通道
+ 2、通道流量的设计（**重点**，lionel）*P119，会考一道计算题*
  + **通道流量**：指通道在数据传送期内，单位时间内传送的字节数。
  + 极限流量：与其工作方式、数据传送期内选择一次设备的时间Ts，传送一个字节的时间Td的长度有关。`1/(Ts+Td)`，一台设备能传K个字节，传送N个字节，需要`N/K`次。每次一台设备`K/(Ts+KTd)`

### chap4、存储体系

#### 4.1、基本概念

##### 4.1.1、存储体系及其分支

##### 4.1.2、存储体系的构成依据

##### 4.1.3、存储体系的性能参数

#### 4.2、虚拟存储器

##### 4.2.1、虚拟存储器的管理方式

##### 4.2.2、页式虚拟存储器的构成

##### 4.2.3、页式虚拟存储器实现中的问题

#### 4.3、高速缓冲存储器

##### 4.3.1、工作原理和基本结构

##### 4.3.2、地址的映像与变换

##### 4.3.3、cache存储器的LRU替换算法的硬件实现

##### 4.3.4、cache存储器的透明性及性能分析

#### 4.4、三级存储体系

##### 4.4.1、物理地址cache

##### 4.4.2、虚地址cache

##### 4.4.3、全cache

### chap5、标量处理机

#### 5.1、重叠方式

##### 5.1.1、重叠原理与一次重叠

+ 解释一条指令大概有三步操作（**取指、分析、执行**）

##### 5.1.2、相关处理

+ 1、转移指令的处理
+ 2、指令相关的处理
+ 3、主存空间数相关的处理
+ 4、通用寄存器组相关的处理

#### 5.2、流水方式

##### 5.2.1、基本概念

+ 工作原理

##### 5.2.2、标量流水线的主要性能

+ 1、吞吐率Tp和加速比Sp
+ 2、效率

##### 5.2.3、标题流水机的相关处理和控制机构

+ 1、局部性相关的处理
+ 2、全局性相关的处理
+ 3、流水机器的中断处理
+ 4、非线性流水线的调度

#### 5.3、指令级高度并行的超级处理机

##### 5.3.1、超标量处理机

##### 5.3.2、超长指令字处理机

##### 5.3.3、超流水线处理机

##### 5.3.4、超标量超流水线处理机

## 最后

### 过程

+ 2022-12-05初步整理了chap01、概论的内容，用于平时的复习，并计划本周内整理下chap02、数据表示。（开卷做完，每章后面的习题，不会的地方，标注一下）
+ 2022-12-08初步整理了一下chap02（仅仅是初步看了一下吧，一些例题都没太细看）
+ 2022-12-12初步整理了一下chap03（大概看了一下，*计算题有点感觉了*）

