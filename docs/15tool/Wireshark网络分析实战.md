## 《Wireshark网络分析实战》

### chap1、wireshark简介

#### 1.2、安置Wireshark（程序或主机）

##### 0、

+ 安在哪里？

##### 1.2.1、准备工作

##### 1.2.2、操作方法

#### 1.3、

##### 1.3.3、幕后原理

##### 1.3.4、拾遗补缺

+ 利用**NTP（网络时间协议）**让wireshark主机/抓包对象与某个中心时钟源同步时间

##### 1.3.5、进阶阅读

#### 1.4、配置启动窗口

##### 1.4.1、准备工作

+ **视图**下面的3点要熟悉
  + 主工具条
  + 过滤器工具栏
  + 状态栏

##### 1.4.2、配置方法

+ 定制工具条
+ 定制抓包主窗口
+ 名字解析
+ 为数据包着色

#### 1.5、配置时间参数

#### 1.6、定义配色规则

+ 在解决TCP故障时，启用配色规则A; 解决SIP和IP语音故障时，启用配色规则B

##### 1.6.1、准备工作

+ **视图->着色规则**

##### 1.6.2、配置方法

#### 1.7、数据文件的保存、打印及导出

##### 1.7.2、操作方法

+ 数据保存操作
+ 保存数据的格式选取
+ 如何打印数据

##### 1.7.3、幕后原理

#### 1.8、通过Edit菜单中的Preferences菜单项，来配置Wireshark主界面

##### 1.8.1、配置准备

##### 1.8.2、配置方法

+ 调整及添加数据包属性列
+ 调整跟执行抓包任务有关的配置
+ 调整名字解析

##### 1.8.3、幕后原理

#### 1.9、配置Preferences窗口中的Protocol选项

##### 1.9.1、配置准备

##### 1.9.2、配置方法

### chap2、抓包过滤器的用法

#### 2.1、简介

+ 抓包过滤器（配置在抓包之前），显示过滤器（配置在抓包之后）

#### 2.2、配置抓包过滤器

2.3、配置Ethernet过滤器

2.4、配置主机和网络过滤器

2.5、配置TCP/UDP及端口过滤器

2.6、配置复合型过滤器

2.7、配置字节偏移和净载匹配型过滤器

### chap3、显示过滤器的用法

3.1、简介

#### 3.2、配置显示过滤器

3.3、配置Ethernet、ARP、主机和网络过滤器

3.4、配置TCP/UDP过滤器

3.5、配置协议所独有的显示过滤器

3.6、配置字节偏移过滤器

3.7、配置显示过滤器宏

### chap4、基本信息统计工具的用法

4.1、简介

4.2、Statistics菜单中Summary工具的用法

#### 4.2、Statistics菜单中Protocol Hierarchy工具的用法

4.2、Statistics菜单中Conversation工具的用法

4.2、Statistics菜单中Endpoints工具的用法

4.2、Statistics菜单中HTTP工具的用法

4.7、配置Flow Graph（数据流图），来查看TCP流

4.8、生成与IP属性有关的统计信息

### chap8、ARP和IP故障分析

8.1、简介

8.2、与ARP有关的连通性网络故障分析

8.3、IP流量分析工具的用法

8.4、利用GeoIP来查询IP地址的归属地

8.5、利用IP包分片问题

8.6、路由选择故障分析

8.7、发现IP地址冲突

8.8、DHCP故障分析

### chap9、UDP/TCP故障分析

9.1、简介

9.2、配置

9.3、TCP连接故障

9.4、TCP重传现象-源头及原因

9.5、重复确认（duplicate ACKs）和快速重传（fast retransmissions）现象

9.6、TCP报文段失序现象

9.7、TCP Zero Window、

#### 9.8、TCP重置（reset）及原因

### chap12、SIP、多媒体和IP电话

12.1、简介

12.2、使用内置于

12.3、SIP故障分析

#### 12.4、RTP/RTCP故障分析

##### 12.4.1、准备工作

+ 端口镜像功能
+ 将交换机上连接该用户UA的端口的流量重定向至Wireshark主机

##### 12.4.2、操作方法

+ Telephony菜单（电话菜单）
+ 若怀疑通话质量不佳是由高网络延迟所引发，**按以下思路来定位**
  + 1、用ping来了解UA之间的网络延迟状况
+ 若怀疑网络中存在高抖动现象，**按以下思路来定位**
  + 1、上面的方法
  + 2、
+ 若怀疑网络中存在丢包问题，**按以下思路来定位**
  + 1、ping，了解UA之间是否存在丢包现象
  + 2、若存在，检查UA间每一段链路的丢包状况
  + 3、选一个RTP数据包，电话菜单，**流分析**菜单项

##### 12.4.3、幕后原理

+ RTP协议的运作原理
+ RTCP协议的运作原理

##### 12.4.4、拾遗补缺

+ 引入延迟的地方
  + 编/解码延迟：数模转换导致的
  + 处理延迟（"打包"延迟）
  + 串行延迟：数据包在链路上发送所产生的延迟，取决于**RTP数据包的大小及通信链路的带宽**

#### 12.5、视频及视频监控应用排障场景

##### 12.5.1、准备工作

##### 12.5.2、操作方法

12.6、IPTV应用排障场景

12.7、视频会议应用排障场景

#### 12.8、排除RTSP协议故障