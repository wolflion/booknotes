## 《从实践中学习TCPIP协议》

### chap1、网络概述

#### 1.2、网络协议

#### 1.3、学习辅助工具--网络工具集netwox

##### 1.3.1、

+ Kali Linux自带netwox，windows要自己安装

##### 1.3.2、层次结构分析

##### 1.3.3、使用搜索功能

##### 1.3.4、使用模块

#### 1.4、学习辅助工具--网络分析工具Wireshark

##### 1.4.1、下载及安装

##### 1.4.4、分析数据包层次结构

+ 抓到的包
  + Packet List，显示所有抓到的包
  + Packet Details，显示一个数据包的详细内容信息，并且以层次结构进行显示
  + Packet Details，显示一个数据包未经处理原始样子，数据是以十六进制和ASCII格式进行显示
+ 以HTTP协议看这3部分内容
  + Packet Details，**5个层次**
    + Frame，物理层的数据帧概况
    + Ethernet II，数据链路层以太网帧头部信息
    + Internet Protocol Version 4，
    + Transmission Control Protocol，传输层的数据段头部信息
    + Hypertext Transfer Protocol，应用层的信息，此处是HTTP协议
+ 用户对数据包分析就是为了**查看包的信息**，展开每一层，都可以查看对应的信息

### chap2、网络访问层

#### 2.1、网络访问层的构成

#### 2.2、网络体系

##### 2.2.1、体系的构成

+ 4个方面
  + 访问方法
  + 数据帧格式，**数据传输格式**
  + 布线类型
  + 布线规则

##### 2.2.2、类型

+ 4大类型
  + IEEE 802.3（以太网）
  + IEEE 802.11（无线网络）
  + IEEE 802.16（WiMAX）
  + 点到点协议（PPP）

#### 2.3、物理地址

##### 2.3.3、查询MAC厂商

+ **前24位是生产厂商的标识符**，可以在mac.51240.com查询

##### 2.3.4、查看网络主机MAC地址信息

+ 显示网络主机MAC地址信息，`netwox 5 -i 192.168.59.133`，**-i，显示 接口信息**
  + *我的疑问是，netwox后面的5是啥意思？*  【搜了一下 5是版本号】
+ 显示局域网中所有主机的MAC地址，`netwox 5 -i 192.168.59.0/24`
  + **增加-u参数，显示查询过程**，`netwox 5 -i 192.168.59.0/24 -u`

##### 2.3.5、根据MAC地址获取主机其他信息

+ MAC地址，显示该主机的其他信息，`netwox 4 -e 00:0C:29:CA:E4:66`，**-e是执行一个命令**

```c
-a：显示所有网络设备的信息。
-c：显示网络设备的配置信息。
-d：显示网络设备的详细信息。
-e：执行一个命令。
-h：显示帮助信息。
-i：显示网络设备的接口信息。
-l：显示网络设备的连接信息。
-m：显示网络设备的MAC地址。
-n：显示网络设备的名称。
-p：显示网络设备的端口信息。
-r：刷新网络设备的信息。
-s：显示网络设备的状态信息。
-t：显示网络设备的类型信息。
-v：显示网络设备的版本信息。
-w：显示网络设备的无线信息。
-x：显示网络设备的XML信息。
```



#### 2.4、以太网

##### 2.4.1、以太网连接

+ 1、拓扑结构
+ 2、传输介质
+ 3、工作机制
  + CSMA/CD

##### 2.4.2、以太帧结构

+ 1、工作机制
  + 把网际层的数据分解为较小的块（64~1518字节）
  + 把数据块打包成帧
  + 把数据帧传递给对应于OSI模型物理层的底层组件，后者把帧转换为比特流，并且通过传输介质发送出去
+ 2、以太帧结构

##### 2.4.3、构建以太帧

+ 查看以太帧，`netwox 32`
+ 构建以太帧，`netwox 32 -a 00:0c:29:c4:8a:de -b 01:02:03:04:05:06`，分别表示源MAC和目标MAC

##### 2.4.4、以太帧洪水攻击

+ 实施以太帧洪水攻击，命令`netwox 75`

#### 2.5、网络配置信息

##### 2.5.1、显示网络配置信息

+ 显示网络配置信息`netwox 1`

##### 2.5.2、显示网络调试信息

### chap3、网际层和IP协议

#### 3.1、IP地址

#### 3.2、IP协议

#### 3.3、构造IP数据包

##### 3.3.1、构建IP数据包

+ 不指定选项，直接运行该模块，`netwox 38`
+ 指定源IP地址，目标IP地址，`netwox 38 -l 192.168.59.132 -m 192.168.12.101`
+ 通过抓包，验证

##### 3.3.2、基于Ethernet层构造IP数据包

+ 不指定选项，直接运行该模块，`netwox 34`

##### 3.3.3、利用分片实施洪水攻击

### chap4、ARP协议

#### 4.3、基于ARP协议扫描

##### 4.3.1、扫描单一主机

+ 验证目标主机是否启用，`netwox 55 -i 192.168.59.135`

##### 4.3.2、扫描多个主机

+ 扫描多个主机，`netwox 71 -i 192.168.59.133, 192.168.59.134`

##### 4.3.3、隐蔽扫描

+ 伪造虚假地址，设置IP为192.168.59.160，MAC地址为，验证目标主机192.168.59.135是否启用。`netwox -i 192.168.59.135 -I 192.168.59.160 -E A1:B2:C3:D4:E5:F6`

##### 4.3.4、伪造ARP响应

##### 4.3.5、周期性发送ARP响应包

### chap5、ICMP协议

#### 5.1、

#### 5.2、ICMP协议应用-探测主机

##### 5.2.2、构造ICMP数据包

+ 构造ICMP扫描，执行命令`netwox 65 -i 192.168.59.135`

##### 5.2.3、伪造ICMP数据包

+ 伪造IP地址为192.168.59.140，MAC地址00:0C:29:ca:e4:99，`netwox 66 -i 192.168.59.135 -E 00:0C:29:CA:E4:99 -I 192.168.59.140`

##### 5.2.4、

##### 5.2.5、伪造连续的ICMP数据请求包

+ 伪造实施主机的IP地址为192.168.59.150，MAC地址为aa:bb:cc:11:22:33，目标主机IP地址为192.168.59.135，`netwox 50 -i 192.168.59.135 -E aa:bb:cc:11:22:33 -I 192.168.59.150 -e 00:0c:29:ca:e4:66`

##### 5.2.6、伪造ICMP数据包的IP层

+ 基于IPv4的ICMP数据包的默认值，`netwox 41`

##### 5.2.7、伪造ICMP数据包的Ethernet层

+ 查看ICMP包的Ethernet默认值，`netwox37`

#### 5.3、ICMP协议应用-路由跟踪

#### 5.4、ICMP协议其他应用

##### 5.4.1、发送ICMP时间戳请求

+ 发送ICMP时间戳请求，`netwox 81 -i 192.168.59.135`

##### 5.4.2、伪造请求超求ICMP数据包

##### 5.4.3、伪造目标不可达

5.4.4、

5.4.5、

##### 5.4.6、伪造重定向ICMP数据包

### chap6、传输层和TCP协议

#### 6.1、基础知识

#### 6.6、TCP协议应用--扫描主机

#### 6.7、TCP协议应用--扫描TCP端口